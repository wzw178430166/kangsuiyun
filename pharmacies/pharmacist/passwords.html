<!DOCTYPE html>
<html lang="cn">
<head>
<meta charset="UTF-8">
<meta name="viewport"
        content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<link rel="stylesheet" type="text/css" href="/statics/css/app/appstyle.css">
<link rel="stylesheet" type="text/css" href="/pharmacies/store/css/header_common.css?v=124">
<link rel="stylesheet" type="text/css" href="/pharmacies/store/css/left_.css?v=125">
<link rel="stylesheet" type="text/css" href="/pharmacies/store/css/index.css">
<link rel="stylesheet" href="/statics/dataManage/css/bootstrap.css">
<script type="text/javascript" src="/statics/js/setFontSize.js"></script>
<script src="/statics/js/layer_mobile/layer.js" type="text/javascript"></script>
<script type="text/javascript" src="/statics/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/statics/js/global.js"></script>
<title>密码管理</title>
<style>
.matst_back {
    width: 95%;
    display: flex;
    justify-content: space-between;
    margin: 0 auto;
    margin-top: .5rem;
}
.back_goo {
    width: 2rem;
    height: .9rem;
    line-height: .9rem;
    border: 1px solid #929292;
    color: #7d7272;
    text-align: center;
    border-radius: .1rem;
}
.back_goo svg {
    width: .6rem;
    height: .6rem;
    vertical-align: middle;
}
.backgoo-keep{float: right;
    color: #ffffff;
    height: 1rem;
    width: 2.8rem;
    line-height: 1rem;
    background: #1890FF;
    border: 1px solid #1890FF;}
 .backgoo-keep svg {
    width: .4rem;
    height: .4rem;margin-right: .1rem;
    vertical-align: middle;
}
.nav-content {
    width: 90%;
    display: flex;
    height: 2rem;
    line-height: 2rem;
    align-items: center;
    margin: 0 auto;
}
.nav-content .nav-icon {
    width: .1rem;
    height: .5rem;
    background: #EC6565;
}
.nav-content .nav-title {
    padding: 0 .2rem;
    color: #191616;
    font-size: .38rem;
    font-weight: 600;
}
.nav-content .nav-line {
    flex: 1;
    height: 1px;
    background: #e4e4e4;
}

.commonlyused{color: red;}
.set-common{color: #000000;text-decoration: underline;}
.table tr th {
    font-weight: normal;
    background: #FAFAFA;
    height: .9rem;font-size: .3rem;
    line-height: .9rem;
}
.table th, .table td {
    padding: 5px 5px;
    height: .8rem;font-size: .26rem;
    line-height: .8rem;
    border-top: 1px solid #dddddd;
}
a {
    color: #426aff;
}

.nav-box{
    overflow: hidden;
    width: 90%;
    padding: .5rem .3rem .8rem .3rem;
    margin: .2rem auto;
    border-radius: .05rem;
    box-shadow: 0px 1px 3px 1px #eae8e8;}
    .nav-input{    
    height: 1rem;
    line-height: 1rem;
    margin-top: .3rem;}
    .nav-span{display: inline-block;
    width: 3rem;
    color: #211c1c;
    text-align: right;
    font-weight: 600;}
    .nav-input input{    width: 6rem;
    height: 1rem;
    margin-left: .2rem;
    border-radius: .1rem;
    box-shadow: 0px 1px 3px 1px #eae8e8;}
    .ctab_bottom {
    width: 96%;
    margin:1rem auto;
    display: flex;
    justify-content: center;
}
.ctab_bottom span:nth-child(1) {
    background: #339EFC;
    color: #ffffff;
}
.ctab_bottom span {
    float: right;
    width: 3rem;
    height: 1rem;
    font-size: .32rem;
    line-height: 1rem;
    border: 1px solid #339EFC;
    text-align: center;
    border-radius: .07rem;
}
.ctab_bottom span svg {
    width: .4rem;
    height: .4rem;
    margin-right: .1rem;
    vertical-align: middle;
}
.input-red{box-shadow: inset 0px 0px 2px red!important;}
.nav-cong form{padding: 0;margin: 0;font-size: .28rem;line-height:initial;}
</style>
</head>
<body>
   <div class="outdiv">
      <div class="left" id="left">
          <!--#include file="left.html"-->
      </div>
       <div class="right_conter">
           <div style="width:auto;margin:auto;">
            <div class="conten_con">
                <div class="cotent_con_left">
                    <div class="header_box" id="header">
                        <!--#include file="header.html"-->   
                      </div>
                      <div class="h8vh"></div>
                      <div class="matst_back">
                        <div class="back_goo" onclick="goback()">
                            <svg t="1607408152481" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3504" width="48" height="48"><path d="M438.4 297.6c12.8 12.8 12.8 28.8 3.2 41.6l-3.2 3.2L300.8 480H800c19.2 0 32 12.8 32 32 0 16-12.8 28.8-28.8 32H300.8l137.6 137.6c12.8 12.8 12.8 28.8 3.2 41.6l-3.2 3.2c-12.8 12.8-28.8 12.8-41.6 3.2l-3.2-3.2-192-192-3.2-3.2-3.2-3.2-3.2-3.2V499.2l3.2-3.2 3.2-3.2 3.2-3.2 192-192c12.8-12.8 32-12.8 44.8 0z" fill="#bfbfbf" p-id="3505"></path></svg>
                            返回
                        </div>
                    </div>
                 
                    <div class="nav-content">
                        <div class="nav-icon"></div>
                        <div class="nav-title">密码管理</div>
                        <div class="nav-line"></div>
                    </div>
                 
                    <div class="nav-cong">
                        <form action="#" id="J_form">
                   
                    <div class="nav-box">
                        <div class="nav-input">
                            <span class="nav-span">输入原密码：</span>
                            <input type="text" name="password" id="password">
                        </div>
                        <div class="nav-input">
                            <span class="nav-span">绑定手机号码：</span>
                            <input type="text" id="phone" name="phone">
                            <span style="padding: .1rem .2rem;background:#239bfb;color:#ffffff;font-size: .23rem;margin-left:.3rem;display:none;" id="code-btn">发送验证码</span>
                        </div>
                        <div class="nav-input">
                            <span class="nav-span">输入验证码：</span>
                            <input type="text" name="code" id="code">
                        </div>
                        <div class="nav-input">
                            <span class="nav-span">输入新密码：</span>
                            <input type="text" name="new_pwd" id="new_pwd">
                        </div>
                        <div class="nav-input">
                            <span class="nav-span">再次输入新密码：</span>
                            <input type="text" name="new_pwd2" id="new_pwd2">
                        </div>
                    </div>
                    
                    <div class="ctab_bottom">
                        <span id="send">
                            <svg t="1607410816622" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5142" width="48" height="48"><path d="M793.6 42.656H42.656v938.656h938.656V230.368l-187.744-187.744z m-153.6 256v-128h42.656V384H341.312V170.656h213.344v128H640zM341.344 896v-213.344h341.344V896H341.344zM896 896h-128v-298.656H256V896H128V128h128v341.344h512v-332.8l128 128V896z" p-id="5143" fill="#ffffff"></path></svg> 
                            保存提交
                        </span>
                    </div>
                </form>
                    </div>

                </div>
             
            </div>
            
          </div>
       </div>
   </div>   
   <script>
    var core=false;
    $(function() {
        var patt1 =/^1(3|4|5|6|7|8|9)\d{9}$/;
       // var regs=;
        var phoneval = $("#phone").val();
        $('#phone').blur(function() {
            if(!patt1.test(phoneval)){
                $('#code-btn').show();
            }
         });
        $('#code-btn').click(function() {
           layer.open({
				content:'发送成功请留意查收',
				skin: 'msg',
				time: 2 //2秒后自动关闭
			});
           core=true;
        });
        $('#send').on('click', function() {
			var self = this;
			if (!checkForm()||!core) {
				return;
			}
			$.ajax({
				url: '#',
				type: "POST",
				dataType: "JSON",
				data: $('#J_form').serialize(),
				success: function(data) {
					console.log(data);
					if (data.status == 1) {
					   console.log(8888);
					} else if (data.status == -2) {
						//checkLogin("golink");
					}
				}
			});
			
		}); //end click
       })
       function checkForm() {
		var check_box = [{
			t: 'password',
            c: '',
            b:'密码格式'
        },{
			t: 'phone',
			c: /^1(3|4|5|6|7|8|9)\d{9}$/,
            b:'手机格式'
        },{
			t: 'code',
			c: '',
            b:'验证码格式'
        },{
			t: 'new_pwd',
			c: '',
            b:'密码格式'
        },{
			t: 'new_pwd2',
			c: '',
            b:'密码格式'
        },
         ];

		var status = true;
		//检验是否为空
		var first_i = -1;
		for (var i in check_box) {
			$("#" + check_box[i].t).removeClass('input-red');
			var con = $("#" + check_box[i].t).val();
			//
			if ($.trim(con) == '' || con == null) {
				if (first_i == -1) {
					$("#" + check_box[i].t).focus();
					first_i = i;
				}
				$("#" + check_box[i].t).addClass('input-red');

				status = false;
			}
		}
		if (!status) {
			layer.open({
				content:'请输入完整信息',
				skin: 'msg',
				time: 2 //2秒后自动关闭
			});
			return status;
		}

		//检验内容是否正确
		for (var i in check_box) {
			var con = $("#" + check_box[i].t).val();
			if (check_box[i].c != '') {
				//var reg = new RegExp(check_box[i].c); 
				var reg = check_box[i].c; 
				if (!reg.test(con)) {
					$("#" + check_box[i].t).addClass('input-red');
					$("#" + check_box[i].t).focus();
					status = false;
					layer.open({
						content: '请输入正确的' + check_box[i].b,
						skin: 'msg',
						time: 2 //2秒后自动关闭
					});
                    return status;
                }
                if(!reg.test($('#phone'))){
                 $('#code-btn').show();
                }
            }
        }

        if(!core){
            layer.open({
				content:'请先发送验证码',
				skin: 'msg',
				time: 2 //2秒后自动关闭
			});
            status = false;   
        }
		return status;
	}
   </script>
</body>
</html>